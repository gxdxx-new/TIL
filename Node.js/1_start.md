# **노드 시작**
## **1. 노드의 정의**
---
* 크롬 V8 자바스크립트 엔진으로 빌드된 <mark>자바스크립트 런타임</mark>
  * V8 : 자바스크립트를 바이트코드로 컴파일하고 실행
  * 런타임 : 특정 언어로 만든 프로그램들을 실행할 수 있게 해주는 가상 머신(V8)의 상태
* 자바스크립트로 작성된 서버를 실행할 수 있음
* 서버 실행을 위해 필요한 http/https/http2 모듈을 제공
* 자바스크립트가 HTML이나 브라우저의 종속성에서 벗어나게 됨
* V8과 libuv를 내부적으로 포함
  * V8 엔진 : 오픈 소스 자바스크립트 엔진(속도 문제를 개선했음)
  * libuv : 노드의 특성인 이벤트 기반, 비동기 논블로킹 I/O 모델을 구현한 라이브러리
<br/><br/>
## **2. 노드의 특성**
---
### 2.1. 이벤트 기반
  * 이벤트가 발생할 때 미리 지정해둔 작업을 수행하는 방식
  * 클릭, 네트워크 요청, 타이머 등
  * 이벤트 리스너 : 이벤트를 등록하는 함수
  * 콜백 함수 : 이벤트가 발생했을 때 실행될 함수
  > 1. 이벤트 리스너에 콜백 함수 등록
  > 2. 시스템에서 이벤트 발생
  > 3. 이벤트 리스너에 등록된 콜백 함수 호출

### 2.2. 논블로킹 I/O
  * 오래 걸리는 함수를 백그라운드로 보내서 다음 코드가 먼저 실행되게 하고, 나중에 오래 걸리는 함수를 실행

> * 동기 vs 비동기 : 처리해야 할 작업들을 <mark>어떠한 흐름</mark>으로 처리 할 것인가에 대한 관점
> * 블로킹 vs 논블로킹 : 처리되어야 하는 작업이 전체적인 작업 <mark>'흐름'을 막느냐 안막느냐</mark>에 대한 관점
>   * 동기     : 요청과 결과가 동시에 일어남, 코드 순서대로 실행
>   * 비동기   : 요청과 결과가 동시에 일어나지 않음, 코드 순서대로 실행 X, 정해진 규칙에 따라 실행
>   * 블로킹   : 요청한 작업을 마칠 때까지 계속 대기
>   * 논블로킹 : 요청한 작업을 즉시 마칠 수 없다면 즉시 return, 요청을 먼저 받고, 완료될 때 응답함

### 2.3. 싱글 스레드
  * 노드 프로세스는 멀티 스레드이지만 직접 다룰 수 있는 스레드는 하나이기 때문에 싱글 스레드라고 표현
  * 싱글 스레드라 주어진 일을 하나밖에 처리하지 못함
    * 블로킹이 발생하는 경우 나머지 작업은 모두 대기해야 함 -> 비효율
    * 대신 논블로킹 모델을 채택하여 일부 코드(I/O)를 백그라운드(다른 프로세스)에서 실행 가능
  * 노드는 주로 멀티 스레드 대신 **멀티 프로세스** 활용
  * 14 버전부터 멀티 스레드 사용 가능
  * 에러를 처리하지 못하는 경우 멈춤
    * 프로그래밍 난이도가 쉬움
    * CPU, 메모리 자원 적게 사용
>  * 프로세스 : 운영체제에서 할당하는 작업의 단위, 프로세스 간 자원 공유 X
>  * 스레드 : 프로세스 내에서 실행되는 작업의 단위, 부모 프로세스 자원 공유

### 2.4. 멀티 스레드
  * 에러 발생 시 새로운 스레드를 생성하여 극복
    * 단, 새로운 스레드 생성이나 놀고 있는 스레드 처리에 비용 발생
    * 프로그래밍 난이도 어려움
    * 스레드 수 만큼 자원을 많이 사용함

>| 멀티 스레딩 | 멀티 프로세싱 |
>|:---|:---|
>| 하나의 프로세스 안에서 여러 개의 스레드 사용 | 여러 개의 프로세스 사용 |
>| CPU 작업이 많을 때 사용 | I/O 요청이 많을 때 사용
>| 프로그래밍이 어려움 | 프로그래밍이 비교적 쉬움
<br/><br/>

## 3. **노드의 역할**
---
### 3.1. 서버로서의 노드
  * 서버 : 네트워크를 통해 클라이언트에 정보나 서비스를 제공하는 컴퓨터 또는 프로그램
  * 클라이언트 : 서버에 요청을 보내는 주체(브라우저, 데스크탑 프로그램, 모바일 앱, 다른 서버에 요청을 보내는 서버)
  * 노드는 서버가 아니라 서버를 구성할 수 있게 하는 모듈

### 3.2. 노드 서버의 장단점

>| 장점 | 단점 |
>|:---|:---|
>| 멀티 스레드 방식에 비해 컴퓨터 자원을 적게 사용함 | 싱글 스레드라서 CPU 코어를 하나만 사용함 |
>| I/O 작업이 많은 서버로 적합 | CPU 작업이 많은 서버로는 부적합 |
>| 멀티 스레드 방식보다 쉬움 | 하나뿐인 스레드가 멈추지 않도록 관리해야 함 |
>| 웹 서버가 내장되어 있음 | 서버 규모가 커졌을 때 서버를 관리하기 어려움 |
>| 자바스크립트를 사용함 | 어중간한 성능 |
>| JSON 형식과 호환하기 쉬움<br>(JSON이 자바스크립트여서 변환 없이 바로 실행 가능) |

### 3.3. 서버 외의 노드
  * 자바스크립트 런타임이기 때문에 용도가 서버에만 한정되지 않음
  *  웹, 모바일, 데스크탑 애플리케이션에도 활용
      * 웹 프레임워크 : Angular, React, Vue, Meteor 등
      * 모바일 앱 프레임워크 : React Native
      * 데스크탑 개발 도구 : Electron